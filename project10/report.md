# report on the application of this deduce technique in Ethereum with ECDSA

## ECDSA简介

ECDSA（Elliptic Curve Digital Signature Algorithm）是一种基于椭圆曲线密码学的数字签名算法。它是用来解决公钥密码学中数字签名问题的一种重要技术。ECDSA算法的核心思想是利用椭圆曲线上的点群运算和离散对数问题来实现数字签名的生成和验证。

与传统的RSA算法相比，ECDSA算法具有更短的密钥长度和更高的安全性。这是因为，ECDSA算法使用的是椭圆曲线上的点群运算，而椭圆曲线的参数可以选择得更小，从而减少了密钥长度，同时椭圆曲线上的离散对数问题也更难以破解，提高了算法的安全性。

ECDSA算法的数字签名过程可以简述如下：

1. 首先，随机选择一个私钥k。
2. 然后，根据椭圆曲线上的点群运算，计算出对应的公钥K = kG，其中G是椭圆曲线上的一个固定点，称为基点。
3. 接着，对待签名的消息进行哈希处理，得到一个哈希值。
4. 然后，使用私钥k和哈希值作为输入，进行一系列计算，得到一个签名值。
5. 最后，将签名值和消息一起发送给验证者。

验证者在验证签名时，需要使用相应的公钥和消息的哈希值，再次进行一系列计算，得到一个签名值，然后将这两个签名值进行比较，以确定签名的有效性。

ECDSA算法是一种重要的密码学算法，被广泛应用于数字签名、身份认证、密钥交换等领域。在以太坊中，ECDSA算法被用于数字签名和公钥恢复，以确保交易和智能合约的安全性和正确性。

## application of this deduce technique in Ethereum with ECDSA

在以太坊的应用中，交易消息不包含任何“from”字段。这是因为发起者的公钥可以直接从ECDSA签名中计算出来。一旦你有公钥，你可以很容易地计算出地址。恢复签名者公钥的过程称为**公钥恢复**。恢复过程如下：

给定 r 和 s 的值，我们可以计算两个可能的公钥。

首先，我们根据签名中的x坐标 r 值计算两个椭圆曲线点R和R’。有两个点，这是因为椭圆曲线在x轴上是对称的，所以对于任何值+x+，在x轴的两侧有两个可能的值适合曲线。

从 r 开始，我们也计算r^(-1)，这是 r 的倒数。

最后我们计算 z，它是消息散列的最低位，其中n是椭圆曲线的阶数。

然后两个可能的公钥是：

K1 = r^(-1) (sR - zG)     K2 = r^(-1) (sR’ - zG)

其中:

- K1 和 K2 是签名者公钥的两种可能性
- r^(-1)是签名的+r+值的倒数
- s是签名的+s+值
- R和R’是临时公钥_Q_的两种可能性
- z是消息散列的最低位
- G是椭圆曲线生成点

为了使事情更有效率，交易签名包括一个前缀值 v，它告诉我们两个可能的R值中哪一个是临时的公钥。如果 v 是偶数，那么R是正确的值。如果 v 是奇数，那么选择R’。这样，我们只需要计算R的一个值。

## 此应用的优势

1. 降低了交易的数据传输量。由于公钥不需要显式传输，因此交易数据的大小可以更小。这可以减少网络传输的负担，提高交易的效率。
2. 更好的隐私保护。由于公钥不需要显式传输，发送者的身份可以更好地保护。这可以防止某些恶意行为者针对特定用户的攻击。
3. 更好的安全性。由于公钥不需要显式传输，验证者必须通过数字签名验证来确定发送者的身份。这可以防止恶意行为者伪造交易或冒充他人的身份。

### 参考文献

[1] (https://github.com/ethereumbook/ethereumbook)